<?php
/** @var \Contestio\Connect\ViewModel\RouteChecker $viewModel */
$viewModel = $block->getData('view_model');

if ($viewModel->isContestioRoute() === false) {
    return;
}

/** @var \Contestio\Connect\Block\React $block */
$reactAppUrl = $block->getReactAppUrl();
$manifestJson = file_get_contents($reactAppUrl . '/manifest.json');
$manifest = json_decode($manifestJson, true);
?>

<style type="text/css">
    .main-container,
    .page-main {
        padding: 0 !important;
    }
</style>

<link rel="stylesheet" href="<?= $reactAppUrl . $manifest['main.css'] ?>" />
<div id="contestio-root"></div>

<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

<script src="<?= $reactAppUrl . $manifest['vendors.js'] ?>"></script>
<script src="<?= $reactAppUrl . $manifest['main.js'] ?>"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const rootElement = document.getElementById('contestio-root');
    
    if (rootElement) {
        console.log('Contestio - React application loaded');
    } else {
        console.error("Contestio - Root element not found");
    }
});
</script>
